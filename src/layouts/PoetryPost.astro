---
import { Image } from "astro:assets";
import BaseLayout from "./BaseLayout.astro";
import FormattedDate from "../components/FormattedDate.astro";
import type { CollectionEntry } from "astro:content";

type Props = CollectionEntry<"poetry">["data"];

const { title, date, image } = Astro.props as Props;
---

<BaseLayout title={title} description={""}>
    <main
        class="col-span-12 pt-4 md:col-span-10 md:col-start-2 xl:col-span-8 xl:col-start-3"
    >
        <div
            class="article-text poetry-content mx-auto w-full max-w-[720px] md:max-w-[calc(100%-2em)]"
        >
            <div class="content-header mb-8 py-4">
                <h1
                    class="content-title animate-content-title text-display-sm text-primary m-0 mb-1"
                >
                    {title}
                </h1>
                <div
                    class="content-meta animate-content-meta text-body-md text-subtle font-bold"
                >
                    <FormattedDate date={new Date(date)} />
                </div>
            </div>
            {
                image && (
                    <div class="content-image animate-content-image mb-8 aspect-[2/1]">
                        <Image
                            src={image}
                            alt={`Hero for ${title}`}
                            class="h-full w-full rounded-lg object-cover"
                            loading="eager"
                        />
                    </div>
                )
            }
            <article
                class="content-body animate-content-body article-prose poetry-content"
            >
                <slot />
            </article>
        </div>
    </main>
</BaseLayout>

<style>
    /* Poetry-specific styling enhancements */
    .poetry-content :global(blockquote) {
        font-style: italic;
        text-align: center;
        margin: 2em 0;
        padding: 1em;
        position: relative;
        animation: content-fade-in 0.45s cubic-bezier(0.22, 1, 0.36, 1) 0.3s
            both;
    }

    /* Enhanced image appearance */
    .content-body :global(img) {
        animation: content-fade-in 0.45s cubic-bezier(0.22, 1, 0.36, 1) both;
    }
</style>
