---
import HeadShot from "./HeadShot.astro";
import BlueskyIcon from "../icons/bluesky.astro";
import GithubIcon from "../icons/github.astro";
import GmailIcon from "../icons/gmail.astro";
import InstagramIcon from "../icons/instagram.astro";
import LinkedinIcon from "../icons/linkedin.astro";
import YtMusicIcon from "../icons/ytmusic.astro";
import XIcon from "../icons/x.astro";
import { bio, site, socialLinks } from "../content/site";

// Map icon names to components
const iconComponents = {
    github: GithubIcon,
    x: XIcon,
    linkedin: LinkedinIcon,
    gmail: GmailIcon,
    bluesky: BlueskyIcon,
    instagram: InstagramIcon,
    ytmusic: YtMusicIcon,
};
---

<!-- 
  Three layouts:
  - Mobile (<768px): Centered, stacked - headshot between greeting and bio
  - Tablet (768-1279px): Row 1: name+hellos | headshot. Row 2: bio+socials (full width)
  - Desktop (1280px+): Two-column with headshot on right, left-aligned text
-->
<div class="grid grid-cols-8 items-center md:items-start md:pt-4 xl:pt-0">
    <!-- Name + Hellos -->
    <div class="col-span-8 md:col-span-5 xl:col-span-6">
        <h1
            class="text-primary text-shadow-hero text-display-lg text-center md:text-left"
        >
            {site.title}
        </h1>
        <div class="mt-4 flex justify-center md:mt-3 md:justify-start lg:mt-4">
            <h2
                class="text-primary text-heading-md lg:text-heading-lg xl:text-heading-xl flex flex-wrap justify-center md:justify-start"
            >
                <div class="mr-2">Hello</div>&#8226;
                <div class="tamil mr-2 ml-2">வணக்கம்</div>&#8226;
                <div class="hindi mr-2 ml-2">नमस्ते</div>&#8226;
                <div class="telugu ml-2">స్వాగతం</div>
            </h2>
        </div>
        <!-- Mobile-only headshot (shows below md breakpoint) -->
        <div class="my-6 flex justify-center md:hidden">
            <div class="w-full max-w-56">
                <HeadShot />
            </div>
        </div>
    </div>

    <!-- Tablet & Desktop headshot (shows at md and above) -->
    <div
        class="hidden md:col-span-3 md:col-start-6 md:flex md:justify-end md:pt-2 xl:col-span-2 xl:col-start-7 xl:row-span-2"
    >
        <div class="w-full max-w-48 lg:max-w-56 xl:max-w-none">
            <HeadShot />
        </div>
    </div>

    <!-- Bio + Social icons -->
    <div class="col-span-8 xl:col-span-6">
        <p
            class="text-body-lg md:text-body-xl px-2 text-center sm:px-4 md:mt-6 md:px-0 md:text-left lg:mt-8 xl:mt-4"
        >
            {bio.short}
        </p>
        <div
            class="no-select mt-4 flex justify-center space-x-2 px-4 md:justify-start md:px-0"
        >
            {
                socialLinks.map((link) => {
                    const IconComponent = iconComponents[link.icon];
                    const isExternal = !link.url.startsWith("mailto:");
                    return (
                        <a
                            href={link.url}
                            target={isExternal ? "_blank" : undefined}
                            rel={isExternal ? "noopener noreferrer" : undefined}
                            aria-label={link.ariaLabel}
                        >
                            <IconComponent
                                height="20"
                                width={link.icon === "x" ? "18" : undefined}
                                class="icon"
                            />
                        </a>
                    );
                })
            }
        </div>
    </div>
</div>
